# Investment Advisory + DocuSign Flow - Visual Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     INVESTMENT ADVISORY COMPLETE FLOW                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   USER STARTS   â”‚
â”‚  Visits Website â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 1: Landing Page               â”‚
â”‚  /en/investment-advisory            â”‚
â”‚  - View services                    â”‚
â”‚  - Click "Schedule Meeting"         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 2: Onboarding Start           â”‚
â”‚  /en/investment-advisory/schedule   â”‚
â”‚  - KYC Wizard loads                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 3: Select Client Type         â”‚
â”‚  â—‹ Individual (PP)                  â”‚
â”‚  â—‹ Company (PM)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 4: Fill Comprehensive Form                            â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚  FOR INDIVIDUALS (PP):                                       â”‚
â”‚  âœ“ Basic Contact (email, mobile, language)                  â”‚
â”‚  âœ“ Personal Identity (name, DOB, nationality)               â”‚
â”‚  âœ“ Residential Address                                      â”‚
â”‚  âœ“ Tax Residency                                            â”‚
â”‚  âœ“ Professional Situation                                   â”‚
â”‚  âœ“ Family Situation                                         â”‚
â”‚  âœ“ Financial Situation (income, assets, debts)              â”‚
â”‚  âœ“ Origin of Funds                                          â”‚
â”‚  âœ“ Investment Profile (risk, objectives, horizon)           â”‚
â”‚  âœ“ Service Type & Initial Investment                        â”‚
â”‚  âœ“ Consents (GDPR, KYC, e-signature)                        â”‚
â”‚                                                              â”‚
â”‚  FOR COMPANIES (PM):                                         â”‚
â”‚  âœ“ Company Identity (name, registration, tax ID)            â”‚
â”‚  âœ“ Registered Address                                       â”‚
â”‚  âœ“ Legal Representative                                     â”‚
â”‚  âœ“ Beneficial Ownership (UBO)                               â”‚
â”‚  âœ“ FATCA & CRS                                              â”‚
â”‚  âœ“ Financial Information                                    â”‚
â”‚  âœ“ Investment Profile                                       â”‚
â”‚  âœ“ Service Type & Initial Investment                        â”‚
â”‚  âœ“ Consents                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 5: Review & Confirm           â”‚
â”‚  - See all information              â”‚
â”‚  - Check declaration box            â”‚
â”‚  - Click "Submit Application"       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ HTTP POST
         â”‚ /api/kyc/submit
         â”‚ {all form data}
         â–¼
â”Œâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”
â•‘              BACKEND PROCESSING (Automatic)                  â•‘
â•‘                  backend/src/routes/kyc.js                   â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                              â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â•‘
â•‘  â”‚ 1ï¸âƒ£  SAVE TO DATABASE                          â”‚          â•‘
â•‘  â”‚    Azure PostgreSQL                            â”‚          â•‘
â•‘  â”‚    âœ“ Create application record                 â”‚          â•‘
â•‘  â”‚    âœ“ Store all form data as JSON               â”‚          â•‘
â•‘  â”‚    âœ“ Status: "submitted"                       â”‚          â•‘
â•‘  â”‚    âœ“ Get Application ID                        â”‚          â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â•‘
â•‘           â”‚                                                  â•‘
â•‘           â–¼                                                  â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â•‘
â•‘  â”‚ 2ï¸âƒ£  GENERATE PDF DOCUMENTS                    â”‚          â•‘
â•‘  â”‚    backend/src/services/pdfGenerator.js        â”‚          â•‘
â•‘  â”‚    âœ“ Lettre de Mission (Engagement Letter)    â”‚          â•‘
â•‘  â”‚    âœ“ DÃ©claration d'AdÃ©quation (Suitability)   â”‚          â•‘
â•‘  â”‚    âœ“ Questionnaire KYC (Compliance)            â”‚          â•‘
â•‘  â”‚    âœ“ Pre-fill with client data                 â”‚          â•‘
â•‘  â”‚    âœ“ Add signature placeholders                â”‚          â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â•‘
â•‘           â”‚                                                  â•‘
â•‘           â–¼                                                  â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â•‘
â•‘  â”‚ 3ï¸âƒ£  UPLOAD TO AZURE BLOB STORAGE              â”‚          â•‘
â•‘  â”‚    backend/src/services/azureStorage.js        â”‚          â•‘
â•‘  â”‚    For each PDF:                               â”‚          â•‘
â•‘  â”‚    âœ“ Upload to container "opulanz-documents"   â”‚          â•‘
â•‘  â”‚    âœ“ Get secure URL with SAS token             â”‚          â•‘
â•‘  â”‚    âœ“ Save document record in database          â”‚          â•‘
â•‘  â”‚    âœ“ Link to application ID                    â”‚          â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â•‘
â•‘           â”‚                                                  â•‘
â•‘           â–¼                                                  â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â•‘
â•‘  â”‚ 4ï¸âƒ£  SEND TO DOCUSIGN                          â”‚          â•‘
â•‘  â”‚    backend/src/services/docusign.js            â”‚          â•‘
â•‘  â”‚                                                â”‚          â•‘
â•‘  â”‚    A. Authenticate with JWT                    â”‚          â•‘
â•‘  â”‚       âœ“ Use private key (RSA)                  â”‚          â•‘
â•‘  â”‚       âœ“ Request access token                   â”‚          â•‘
â•‘  â”‚       âœ“ Scopes: signature, impersonation       â”‚          â•‘
â•‘  â”‚                                                â”‚          â•‘
â•‘  â”‚    B. Create Envelope                          â”‚          â•‘
â•‘  â”‚       âœ“ Add all PDFs as documents              â”‚          â•‘
â•‘  â”‚       âœ“ Set signer (client email/name)         â”‚          â•‘
â•‘  â”‚       âœ“ Position signature tabs                â”‚          â•‘
â•‘  â”‚       âœ“ Configure webhook callback             â”‚          â•‘
â•‘  â”‚       âœ“ Status: "sent" (send immediately)      â”‚          â•‘
â•‘  â”‚                                                â”‚          â•‘
â•‘  â”‚    C. Get Envelope ID                          â”‚          â•‘
â•‘  â”‚       â†’ e.g., "a1b2c3d4-e5f6-7890-abcd-..."    â”‚          â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â•‘
â•‘           â”‚                                                  â•‘
â•‘           â–¼                                                  â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â•‘
â•‘  â”‚ 5ï¸âƒ£  UPDATE DATABASE WITH DOCUSIGN INFO        â”‚          â•‘
â•‘  â”‚    âœ“ Set docusign_envelope_id                  â”‚          â•‘
â•‘  â”‚    âœ“ Set docusign_status = "sent"              â”‚          â•‘
â•‘  â”‚    âœ“ Set sent_for_signature_at = NOW()         â”‚          â•‘
â•‘  â”‚    âœ“ Set status = "pending_signature"          â”‚          â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â•‘
â•‘           â”‚                                                  â•‘
â•‘           â–¼                                                  â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â•‘
â•‘  â”‚ 6ï¸âƒ£  RETURN SUCCESS TO FRONTEND                â”‚          â•‘
â•‘  â”‚    Response:                                   â”‚          â•‘
â•‘  â”‚    {                                           â”‚          â•‘
â•‘  â”‚      success: true,                            â”‚          â•‘
â•‘  â”‚      applicationId: 123,                       â”‚          â•‘
â•‘  â”‚      envelopeId: "a1b2c3...",                  â”‚          â•‘
â•‘  â”‚      message: "Signature request sent"         â”‚          â•‘
â•‘  â”‚    }                                           â”‚          â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 6: Success Page               â”‚
â”‚  âœ… Application Submitted!           â”‚
â”‚  ğŸ“‹ Application ID: APP-123          â”‚
â”‚  ğŸ“§ DocuSign Envelope ID shown       â”‚
â”‚  ğŸ’¡ "Check your email"               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


         â”‚ (DocuSign processes in parallel)
         â–¼
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    DOCUSIGN PROCESSING                       â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                              â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â•‘
â•‘  â”‚ ğŸ“§ EMAIL SENT TO CLIENT                       â”‚          â•‘
â•‘  â”‚    From: DocuSign <no-reply@docusign.net>     â”‚          â•‘
â•‘  â”‚    To: client@email.com                       â”‚          â•‘
â•‘  â”‚    Subject: OPULANZ BANKING - Documents...    â”‚          â•‘
â•‘  â”‚                                                â”‚          â•‘
â•‘  â”‚    Body:                                       â”‚          â•‘
â•‘  â”‚    "You have been sent documents from         â”‚          â•‘
â•‘  â”‚     OPULANZ BANKING"                           â”‚          â•‘
â•‘  â”‚                                                â”‚          â•‘
â•‘  â”‚    Documents:                                  â”‚          â•‘
â•‘  â”‚    â€¢ Lettre de Mission                         â”‚          â•‘
â•‘  â”‚    â€¢ DÃ©claration d'AdÃ©quation                  â”‚          â•‘
â•‘  â”‚    â€¢ Questionnaire KYC                         â”‚          â•‘
â•‘  â”‚                                                â”‚          â•‘
â•‘  â”‚    [Review Documents] button                   â”‚          â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         â”‚
         â”‚ (Client clicks email link)
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CLIENT REVIEWS & SIGNS IN DOCUSIGN                          â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚                                                              â”‚
â”‚  1. Opens DocuSign in browser                               â”‚
â”‚  2. Sees all documents with signature fields highlighted    â”‚
â”‚  3. Reviews each document (Lettre, DÃ©claration, KYC)        â”‚
â”‚  4. Clicks signature fields                                 â”‚
â”‚  5. Types or draws signature                                â”‚
â”‚  6. Initials where required                                 â”‚
â”‚  7. Clicks "Finish" button                                  â”‚
â”‚                                                              â”‚
â”‚  âœ… DocuSign marks envelope as "completed"                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ (DocuSign sends webhook)
         â–¼
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘           WEBHOOK PROCESSING (Automatic)                     â•‘
â•‘           backend/src/routes/kyc.js                          â•‘
â•‘           POST /api/kyc/docusign-webhook                     â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                              â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â•‘
â•‘  â”‚ 1ï¸âƒ£  RECEIVE WEBHOOK FROM DOCUSIGN             â”‚          â•‘
â•‘  â”‚    {                                           â”‚          â•‘
â•‘  â”‚      event: "envelope-completed",              â”‚          â•‘
â•‘  â”‚      envelopeId: "a1b2c3...",                  â”‚          â•‘
â•‘  â”‚      status: "completed"                       â”‚          â•‘
â•‘  â”‚    }                                           â”‚          â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â•‘
â•‘           â”‚                                                  â•‘
â•‘           â–¼                                                  â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â•‘
â•‘  â”‚ 2ï¸âƒ£  DOWNLOAD SIGNED DOCUMENTS                 â”‚          â•‘
â•‘  â”‚    âœ“ Call DocuSign API                         â”‚          â•‘
â•‘  â”‚    âœ“ Download combined signed PDF              â”‚          â•‘
â•‘  â”‚    âœ“ Contains all signatures                   â”‚          â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â•‘
â•‘           â”‚                                                  â•‘
â•‘           â–¼                                                  â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â•‘
â•‘  â”‚ 3ï¸âƒ£  UPLOAD SIGNED PDF TO AZURE                â”‚          â•‘
â•‘  â”‚    âœ“ Upload to Azure Blob Storage              â”‚          â•‘
â•‘  â”‚    âœ“ Filename: signed_<envelope_id>_<date>.pdf â”‚          â•‘
â•‘  â”‚    âœ“ Get secure URL                            â”‚          â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â•‘
â•‘           â”‚                                                  â•‘
â•‘           â–¼                                                  â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â•‘
â•‘  â”‚ 4ï¸âƒ£  UPDATE DATABASE                           â”‚          â•‘
â•‘  â”‚    UPDATE documents SET                        â”‚          â•‘
â•‘  â”‚      docusign_status = 'completed',            â”‚          â•‘
â•‘  â”‚      signed_document_url = '<azure_url>',      â”‚          â•‘
â•‘  â”‚      signed_at = NOW(),                        â”‚          â•‘
â•‘  â”‚      status = 'signed'                         â”‚          â•‘
â•‘  â”‚    WHERE docusign_envelope_id = '<envelope>'   â”‚          â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â•‘
â•‘           â”‚                                                  â•‘
â•‘           â–¼                                                  â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â•‘
â•‘  â”‚ 5ï¸âƒ£  SEND CONFIRMATION EMAIL (Optional)        â”‚          â•‘
â•‘  â”‚    âœ“ Email to client: "Documents signed!"      â”‚          â•‘
â•‘  â”‚    âœ“ Email to admin: "New signed application"  â”‚          â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PROCESS COMPLETE âœ…                 â”‚
â”‚                                     â”‚
â”‚  âœ“ Application in database          â”‚
â”‚  âœ“ Original PDFs in Azure           â”‚
â”‚  âœ“ Signed PDFs in Azure             â”‚
â”‚  âœ“ DocuSign records complete        â”‚
â”‚  âœ“ Ready for compliance review      â”‚
â”‚  âœ“ Ready for account activation     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                        DATA FLOW SUMMARY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Frontend Form
    â”‚
    â”œâ”€â†’ POST /api/kyc/submit
    â”‚
    â–¼
Azure PostgreSQL
    â”œâ”€â†’ applications table (all form data)
    â””â”€â†’ documents table (metadata)
    â”‚
    â–¼
PDF Generator
    â”œâ”€â†’ Lettre de Mission.pdf
    â”œâ”€â†’ DÃ©claration d'AdÃ©quation.pdf
    â””â”€â†’ Questionnaire KYC.pdf
    â”‚
    â–¼
Azure Blob Storage
    â”œâ”€â†’ Container: opulanz-documents
    â””â”€â†’ URLs stored in database
    â”‚
    â–¼
DocuSign API (JWT Auth)
    â”œâ”€â†’ Create envelope
    â”œâ”€â†’ Add documents
    â”œâ”€â†’ Set signer
    â”œâ”€â†’ Send email
    â””â”€â†’ Return envelope ID
    â”‚
    â–¼
Client Email Inbox
    â”œâ”€â†’ Open DocuSign link
    â”œâ”€â†’ Review documents
    â”œâ”€â†’ Sign electronically
    â””â”€â†’ Click "Finish"
    â”‚
    â–¼
DocuSign Webhook
    â””â”€â†’ POST /api/kyc/docusign-webhook
    â”‚
    â–¼
Download Signed PDF
    â””â”€â†’ Upload to Azure Blob Storage
    â”‚
    â–¼
Update Database
    â””â”€â†’ Mark as "signed" with timestamp

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


CURRENT STATUS:
===============

âœ… WORKING (95% Complete):
  â€¢ Frontend form - all fields
  â€¢ Backend API - all endpoints
  â€¢ Database - schema created
  â€¢ Azure Blob Storage - configured
  â€¢ DocuSign code - ready
  â€¢ Webhook handler - ready
  â€¢ Success page - complete

âš ï¸  NEEDS SETUP (5 minutes):
  â€¢ DocuSign RSA keypair
  â€¢ Grant consent in DocuSign portal

ğŸš€ READY TO GO LIVE after DocuSign setup!
